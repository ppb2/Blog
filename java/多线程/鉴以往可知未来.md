# 操作系统发展史

> 读史可以使人明智 鉴以往可以知未来

## 串行处理

当时还没有操作系统，程序员直接与计算机硬件打交道。所有的机器都由一个控制台运行，控制台上包括显示灯，触发器、某种类型的的输入设备和打印机，将机器代码编写的程序通过输入设备载入计算机。如果出现错误程序停止，显示灯会显示错误原因。如果正常完成，则由打印机打印出结果。
引出的问题：

1. 调度问题

    大多数装置通过登记表预约机器时间，一个用户以半小时为单位预约，存在如下问题
    - 如果用户预约了1小时，但是只用了40分钟任务就跑完了，那么接下来的时间计算机只能闲置
    - 如果用户再预约的时间内没有跑完任务，那么任务就会强制停止
  
2. 准备时间

    早期的一个程序称为作业。他包括在内存中加载编译器，以及高级语言程序，保存好编译程序，然后加载程序与共用函数，然后链接在一起。每一步都需要安装拆卸磁带，或者准备卡片组。运行期间如果发生错误，用户只能重新开始。

这种模式下称之为串行处理。用户必须顺序访问计算机，一次只能有一个作业。后面为了使串行更加有效，开发了各种系统软件工具，例如公用函数库、链接器、加载器、IO驱动程序等。这种公用程序对所有用户都是可用的

## 简单批处理系统

由于调度和准备时间浪费大量的机器时间。为了提高处理器的处理效率显得非常重要。因此提出了批处理操作系统的概念。简单批处理的核心思想是，通过一个常驻内存的监控程序来自动加载准备用户程序，当一个程序被执行完成，处理器执行监控程序的指令，这些指令读入下一个作业，并将其存储到内存中，一旦读取作业完成，监控程序将指导处理器执行用户程序。
尽管在批处理系统中，用户程序与监控程序交替运行。一部分内存交给监控程序使用，同时监控程序消耗了一部分系统开销。但是批处理操作系统还是提高了计算机的利用率。

## 多道批处理系统

简单批处理操作系统提供了自动化的作业序列，减少了作业准备时间。处理器任然是经常处于空闲状态的。原因是因为相对于处理器来说I/O设备速度太慢了。因此多道批处理系统应运而生。

- 多道批处理系统：
  
  多道批处理系统的核心思想，在多个用户程序之间切换，假如存在两个用户作业在操作系统中运行，当其中一个用户作业在等待I/O，此时操作系统可以切换到另一个不需要等待I/O的程序中执行。解决了处理器空等状态，极大的提高了处理的效率。

  硬件支持：支持IO中断以及DMA中断的硬件，这是实现程序切换的关键。

  中断： 指CPU在收到外部中断信号后，停止原来工作，转去处理该中断事件，完毕后回到原来断点继续工作。
中断处理过程：中断请求，中断响应，中断点（暂停当前任务并保存现场），中断处理例程，中断返回（恢复中断点地现场并继续原有任务）

## 分时系统

分时系统在多道批处理操作系统上，加入了人机交互的概念。对于许多程序来说，需要提供一种模式，使得用户可以直接与程序交互。

分时概念的由来：多道程序设计允许处理器处理多个交互作业，由于多个用户分享处理器时间，所以此技术称为分时。

设计目标：主要设计目标是能够及时响应单个用户的要求，需要支持多个用户。由于用户反应时间比较长，因此这两个要求是可以实现的。在分时系统中，多用户可以通过终端同时访问操作系统，由操作系统控制用户程序以很短的时间单位（时间片）来交替执行。

## 总结

分时与多道程序设计引入了操作系统的许多新问题。内存中多个作业，则必须保证他们互不干扰，对于多个交互用户，必须对文件系统进行保护，只有授权用户才能访问某个特定文件，可外还需要处理资源竞争问题。